---
title: 更新日志
date: 2023-05-31 23:19:06
permalink: /pages/bbdaf6/
---

## v2.4.0(2023-11-15)
1. 支持分布式任务调度【**新增**】
> 1.1 支持秒级任务【**新增**】
> 1.2 支持集群、广播、分片任务模式【**新增**】
> 1.3 支持丢弃、覆盖、并行阻塞策略【**新增**】
> 1.4 支持固定时间、CRON表达式(页面可直接生成CRON表达式) 间隔时间【**新增**】
> 1.5 支持失败重试【**新增**】
> 1.6 支持任务超时机制【**新增**】
> 1.7 简单易用的管理系统【**新增**】
> 1.8 高性能任务调度，同时支持动态水平扩展【**新增**】
> 1.9 同时执行 MYSQL、Mariadb、postgresSQL 三种数据库类型
> ....
2. 支持重试场景执行超时时间设置【**新增**】
3. 支持通过动态计算提升系统获取任务的数量，提供系统的调度速率【**新增**】
4. 使用bucket机制优化负载均衡的机制【**新增**】
5. 使用时间轮优化重试任务调度，大大提高了调度的准确度【**新增**】
6. 通过使用不同akka的dispatcher减小任务之间的相互影响【**新增**】
7. 修复了分布式锁所有节点都获取锁失败的问题 【BUG】
8. 镜像支持linux/arm64,linux/amd64两种系统架构【**新增**】
9. 优化客户端注册续约问题【**优化**】

参与者设计开发人员名单
1. https://gitee.com/zorro215
2. https://gitee.com/zhengweilins

TODO LIST
1. Dashboard添加任务调度数据展示
2. 任务调度新增失败告警通知
3. 任务调度新增手动暂停、取消、恢复执行中任务
4. 重试告警新增重试任务进入死信队列告警类型
5. 告警支持通知负责人配置

## v2.3.0 & 3.0.0 (2023-09-17)

### <EasyRetryIcon iconType='icon-shipin' /> Easy Retry 发布 2.3.0 & 3.0.0 支持SpringBoot3.x等多个新功能

> [<EasyRetryIcon iconType='icon-jinritoutiao'/>](https://www.ixigua.com/i7279264173849543187/) |  [<EasyRetryIcon iconType='icon-wf_Bzhan'/>](https://www.bilibili.com/video/BV1RP411t7fc/)

1. 手动执行任务操作【**新增**】[issues](https://gitee.com/aizuda/easy-retry/issues/I80WPQ)
2. bizNo支持Aviator、SPEL、QLExpress等多种表达式并通过SPI机制实现灵活扩展 【**优化**】[issues](https://gitee.com/aizuda/easy-retry/issues/I801A7)
3. 优化客户端版本依赖【**优化**】
4. @Retryable注解在接口上不生效 【BUG】 [issues](https://gitee.com/aizuda/easy-retry/issues/I7VGS8)
5. 支持Spring Boot 3.x 【**新增**】[issues](https://gitee.com/aizuda/easy-retry/issues/I7Q2TI)
6. 当只有一个组时，组状态从开启到关闭，重试任务会继续执行【BUG】[issues](https://github.com/aizuda/easy-retry/issues/9)
7. 多场景数据上报时重复生成retryTask【BUG】[issues](https://github.com/aizuda/easy-retry/issues/7)
8. 修复迁移死信队列id重复问题【BUG】
9. 优化控制台菜单图标【**优化**】
10. 修复回调执行器获取的错误问题【BUG】
11. 其他优化项

## v2.2.0 (2023-08-29)

### <EasyRetryIcon iconType='icon-shipin' /> [Easy Retry 发布 2.2.0 新增多个重要功能快来尝鲜吧](https://www.ixigua.com/i7273130003787678260/)
<br/>


1. 支持Mysql/MariaDB/PostgreSql数据库【**新增**】[issues](https://gitee.com/aizuda/easy-retry/issues/I7Q2TS)
2. 对notify, scene, group, retry_task, retry_dead_letter表的操作抽象access统一收口【**优化**】
3. 去除hutool-all改为按需引入【**优化**】
4. 修复幂等没有过滤类型为TaskTypeEnum.RETRY和状态：RetryStatusEnum.RUNNING问题 【BUG】 [issues](https://gitee.com/aizuda/easy-retry/issues/I7U2WB)
5. 滑动窗口关闭时向服务端同步所有数据 【**优化**】
6. 修复用户删除无效问题【BUG】
7. 修复远程重试返回值为基本类型时返回异常【BUG】
8. 客户端EasyRetryListener、RetryArgSerializer、RetrySiteSnapshotContext 使用SPI形式接入【**新增**】[issues](https://github.com/aizuda/easy-retry/issues/5)
9. 死信队列支持批量回滚和批量删除 【**新增**】 [issues](https://github.com/aizuda/easy-retry/issues/3)
10. 其他功能优化

## v2.1.1 (2023-08-17)
1. 修复windows操作系统启动netty server失败问题【BUG】[issues](https://gitee.com/aizuda/easy-retry/issues/I7TZ51)

## v2.1.0 (2023-08-04)
1. 新增批量新增任务功能【**新增**】[issues](https://gitee.com/aizuda/easy-retry/issues/I7JOPV)
2. 重构了新增任务模型，支持客户端上报、控制台手动新增和单个新增等多种模式 【**优化**】
3. 修改getBlacklist NPE问题 【BUG】
4. 删除hibernate-validator包使用spring-boot-starter-validation 【**优化**】
5. 优化调度日志信息 【**优化**】[issues](https://github.com/aizuda/easy-retry/issues/1)
6. 修复JacksonSerializerNPE问题 【BUG】
7. 客户端支持yml、JVM参数和自动获取IP和端口三种方式 [issues](https://gitee.com/aizuda/easy-retry/issues/I7M0II) 【**新增**】
8. 废弃shedlock组件 [issues](https://gitee.com/aizuda/easy-retry/issues/I7JORT) 【**优化**】
9. 数据上报使用横向数据结构实现滑动窗口替换环形滑动窗口 【**优化**】
10. netty服务端接收请求改为actor模型 【**优化**】[issues](https://gitee.com/aizuda/easy-retry/issues/I7N9D5)
11. 重试任务和回调任务扫描改为以id作为偏移进行滚动扫描 【**优化**】
12. 客户端回调接口支持SpringBean和普通类模式 【**优化**】
13. 负载均衡器新增负载均衡周期时间配置 【**优化**】
14. 优化NettyServer启动失败主线程无感知问题 [issues](https://gitee.com/aizuda/easy-retry/issues/I7N9CW)
15. 组配置添加字段说明文档 [issues](https://github.com/aizuda/easy-retry/issues/2)
> 升级指南
1. 第一种升级方式: 将shedlock表名改为distributed_lock
2. 第二种升级方式: 将DistributedLock类上的`@TableName("distributed_lock")`改为`@TableName("shedlock")`

## v2.0.3(2023-07-27)
1. 修复回调状态错误问题【BUG】【[issues](https://gitee.com/aizuda/easy-retry/issues/I7NHFE)】
2. 优化定时处理重试完成和重试最大次数的数据

## v2.0.2(2023-07-18)
1. 修复没有配置组时获取场景黑名单NPE问题 【BUG】
2. 修复不同组的ScanActor生成相同对象问题 【BUG】

## v2.0.1(2023-07-10)
1. 修复回调任务执行到达最大次数后重复新建回调任务【BUG】

## v2.0.0(2023-07-01)
1. 添加局部保存的提示 【**新增**】[PR](https://gitee.com/aizuda/easy-retry/pulls/7)
2. pod列表页新增消费组显示 【**新增**】
3. 优化IdempotentIdContext注释、手动生成幂等号改为IdempotentIdContext传参【优化】[PR](https://gitee.com/aizuda/easy-retry/pulls/6)
4. 移除重复的ThreadLocal赋值动作 【优化】[PR](https://gitee.com/aizuda/easy-retry/pulls/4)
5. 优化请求客户端的日志信息 【优化】
6. 组配置校验分区时，验证对应的表是否存在 【**新增**】
7. 修复新增组配置，分区为0校验异常 【BUG】
8. POD查询新增过期时间过滤 【**新增**】
9. 优化本地重试注解中的exclude和include，配置了仍然执行了2次重试 【BUG】
10. 新增调用客户端代理类【**新增**】
11. 新增下线路由剔除功能【**新增**】
12. 新增路由转移功能 【**新增**】
13. 添加启动logo 【**新增**】
14. 优化表定义 【优化】
15. 看板查询失败问题 【BUG】
16. 优化详情页查询 【优化】
17. 去除回调重试流量标识【优化】
18. 优化日志存储逻辑【优化】
19. 新增日志过期策略配置 【**新增**】
20. 新增定时清除日志功能 【**新增**】
21. 优化看板页面日志的查询统计【优化】
22. 新增日志详情页查询调度日志列表 【**新增**】
23. 优化详情页查询 【优化】
24. 修复不同组相同场景添加失败问题 
25. 优化任务详情页，重试日志只显示当前场景 
26. 后端二次校验分区数 【优化】
27. 修复回滚主键冲突问题 【BUG】
28. 新增ReBalanceFilterStrategies过滤【**新增**】
29. 新增pod列表查询【**新增**】
30. 优化路由注册 【**新增**】
31. 重构组ReBalance逻辑【**新增**】
32. 优化客户端和服务端注册逻辑 【**新增**】
33. 优化配置同步逻辑 【**新增**】
34. 添加初始化时指定数据库的逻辑【**新增**】[PR](https://gitee.com/aizuda/easy-retry/pulls/1)
### 表字段变更明细
|序号|表名|字段|操作|描述|
|-|-|-|-|-|
|1|retry_task_log|update_dt|**删除**|更新时间|
|2|retry_task_log|error_message|**删除**|异常信息|
|2|retry_task_log|idx_create_dt|新增索引||
|3|scene_config|uk_name|**变更索引uk_group_name_scene_name**|group_name、scene_name联合索引|
|4|server_node|ext_attrs|**新增**|扩展字段|
|5|server_node|idx_expire_at_node_type|**新增索引**||
|6|retry_task_log_message||**新增表**|任务调度日志信息记录表|

## v1.5.1(2023-06-15)
1. 修复本地重试服务间传递头节点丢失问题
2. 优化DDL模式下接口调用入口时间没有刷新问题


## v1.5.0(2023-06-10)
1. 优化了场景配置提示信息[issues-I7AAC1](https://gitee.com/aizuda/easy-retry/issues/I7AAC1)【**新增**】
2. 修复远程重试次数日志打印错误问题【BUG】
3. 优化了初始化场景默认执行21次，任务停留3天【优化】
4. 回调支持持久化【**新增**】
5. 迁移了部分枚举到服务端模块
6. 页面新增数据类型展示并【**新增**】
7. 优化状态的显示样式【优化】
8. 新增本地重试添加重试流量标识[issues-I7BCNI](https://gitee.com/aizuda/easy-retry/issues/I7BCNI)【**新增**】
9. 在线机器最好支持查看详情[issues-I7B4XK](https://gitee.com/aizuda/easy-retry/issues/I7B4XK)【**新增**】
10. 优化部分代码描述和类名【优化】
11. **注意: sql文件有变更**
> 特别感谢[moyu](https://gitee.com/moyucoder)、[zhangyutongxue](https://gitee.com/zhangyutongxue)两位小伙伴给予的宝贵建议和支持

## v1.4.0(2023-06-01)
1. 新增飞书告警【新增】
2. 优化场景和通知的列表支持横向滑动【新增】
3. 限制固定间隔和随机间隔两个退避策略的间隔时间不能小于10秒【优化】
4. 支持上报数据无场景时,自动初始化场景【新增】
5. 优化RetryAspect不开启重试时日志模糊问题【优化】
6. 优化Easy-Retry版本版本获取方式【优化】

## v1.3.0(2023-05-18)

1. 新增手动创建任务并上传服务端功能【新增】
2. 重构客户端请求服务端模块【更新】
3. 新增同步请求服务端功能【新增】
4. 使用策略模型重构上报模块【更新】
5. 限定创建组和场景仅支持字母数字和下划线【更新】
6. 优化reqId使用AtomicLong作为请求id【更新】
7. 优化部分代码描述和类名【更新】
8. 降低akka版本为 2.6.20【更新】

## v1.2.0(2023-05-09)

1. bizId变更为idempotent_id【新增】
2. 新增unique_id用于标识重试数据【新增】
3. 新增unique_id的生成模式分别支持号段模式(美团leaf的号段模式算法)、雪花算法两种模式【新增】
4. 管理系统登录页新增版本号【新增】
5. 重试详情页，新增通过唯一id查询日志列表【新增】
6. 修改页头页底内容【新增】
7. 修复登录密码校验问题【BUG】
8. 使用mapstruct 替代通过反射进行对象属性装换【更新】
9. 优化部分代码【更新】
10. 注意: 本地sql文件有变更

## v1.1.0(2023-05-03)

1. RetryAspect添加Ordered，支持动态调整Aop执行顺序【新增】
2. 手动添加重试任务【新增】
3. 更新核心字段描述【更新】
4. 更新类名定义【更新】
5. 删除重试retry_task_x的biz_id唯一键索引【删除】
6. 新增批量删除重试任务数据【新增】
7. 新增批量修改重试任务状态和执行器能力【新增】
8. 修复管理界面日期显示问题【BUG】
9. 停止策略改为责任链模式【更新】

## v1.0.0
发布第一版
