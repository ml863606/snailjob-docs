---
title: 服务端剖析
date: 2022-03-18 15:02:52
permalink: /pages/3bc7f3/
article: false
---
#### 系统架构图

![系统架构图-v1.0.jpg](../../.vuepress/public/img/system_architecture_v1.0.jpg)

### 服务端剖析
#### 分布式调度模块

- master thread
    1. 扫描所有启用的组，通过客户端协调算法，分配当前节点需要重试的组
    2. 生成Actor,并扫描当前分配组下面所有待重试的数据

- 重试分发组件
    - ScanGroupActor
        1. 通过配置的时间范围扫描待重试数据
        2. 通过条件过滤器，过滤出满足条件的重试数据

    - ExecUnitActor
        1. 通过远程调用下发重试指令,
        2. 标记重试流量

    - 结果处理
        1. FailureActor: 处理重试失败数据，累加重试次数
        2. FinishActor: 处理重试成功数据并更新状态为重试成功

- 算法
    - 客户端轮询算法
        1. 一致性Hash算法
        2. LRU算法
        3. 随机算法
    - 服务端Rebalance算法
        1. 一致性hash 算法
  

  
  
  
  







