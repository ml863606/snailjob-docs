---
title: 服务部署
date: 2023-07-06 19:02:54
permalink: /pages/406a66/
---

## 配置部署服务端调度平台
### 初始化数据库
数据库脚本位置
```
doc/sql/easy_retry.sql
```

### 系统配置
```yaml
spring:
  datasource:
    name: easy_retry
    url:  jdbc:mysql://localhost:3306/x_retry?useSSL=false&characterEncoding=utf8&useUnicode=true
    username: root
    password: root
    ....其他配置信息....
easy-retry:
  last-days: 30 # 拉取重试数据的天数
  retry-pull-page-size: 100 # 拉取重试数据的每批次的大小
  netty-port: 1788  # 服务端netty端口
  total-partition: 2  # 重试和死信表的分区总数
  limiter: 10 # 一个客户端每秒最多接收的重试数量指令
  step: 100 # 号段模式下步长配置
  log-storage: 90 # 日志保存时间(单位: day)
  callback: # 回调配置
    max-count: 288 #回调最大执行次数
    trigger-interval: 900 #间隔时间

```

## 项目部署
### 下载源码部署
- 下载源码
  ```
   https://gitee.com/aizuda/easy-retry.git
   或
   https://github.com/aizuda/easy-retry.git
  ```

- maven 打包镜像
```
maven clean install
```

- 修改配置
```
/easy-retry-server/src/main/resources/application.yml
```

- 启动
```
java -jar easy-retry-server.jar
```

### docker 部署
- 下载镜像
```
docker pull byteblogs/easy-retry:{Latest Version}
```

- 创建容器并运行

```
/**
* 如需自定义 mysql 等配置，可通过 "-e PARAMS" 指定，参数格式 PARAMS="--key1=value1  --key2=value2" ；
* 配置项参考文件：/easy-retry-server/src/main/resources/application.yml
* 如需自定义 JVM内存参数 等配置，可通过 "-e JAVA_OPTS" 指定，参数格式 JAVA_OPTS="-Xmx512m" ；
*/
docker run \
  -e PARAMS="--spring.datasource.username=root --spring.datasource.password=root  --spring.datasource.url=jdbc:mysql://IP:3306/easy_retry?useUnicode=true&characterEncoding=UTF-8&autoReconnect=true&serverTimezone=Asia/Shanghai " \
  -p 8080:8080 \
  -p 1788:1788 \
  --name easy-retry-server-1  \
  -d byteblogs/easy-retry:{Latest Version}

```

如果你已经正确启动系统了，那么你可以输入以下地址就可以进入管理系统了
```
http://localhost:8080
```

## [帮助我们改善此页面](https://gitee.com/aizuda/easy-retry-docs/blob/master/docs/01.%E6%8C%87%E5%8D%97/01.%E6%8C%87%E5%8D%97/02.%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.md)
